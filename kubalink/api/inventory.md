---
description: Действия с ТМЦ и складом
---

# inventory

```
Дополнительные параметры:
action - подкатегория запроса
```

{% hint style="info" %}
В учёте ТМЦ используется понятие как "счет учета". Счета представляют значения вида "205031234567"
{% endhint %}

Первые 3 цифры:

```
101 - Поставщики
204 - Склад
205 - Абонент
206 - Сооружение связи
210 - Кабельная линия
212 - Задание
213 - Здания
215 - Сотрудники
900 - Списано
```

4 и 5 цифра - субсчет

```
01 - Подотчет долгий
02 - Подотчет короткий
03 - ТМЦ
08 - Аренда
09 - Учет проданного
.. (можно добавлять собственные субсчета)
```

Последние 7 цифр - это ID объекта с ведущими нулями

{% hint style="info" %}
Последние 7 цифр - это ID объекта с ведущими нулями.&#x20;

205031234567 - Счёт абонента id 1234567 и субсчет обычного учета ТМЦ
{% endhint %}

## Подкатегории

### **add\_inventory**

{% code overflow="wrap" %}
```
Описание: Приход ТМЦ
Обязательные параметры:
 inventory_catalog_id - ID наименования ТМЦ
 trader_id - ID поставщика
 storage_id - ID склада, на который выполнить приход
Необязательные параметры:
 amount - количество (по-умолчанию: 1)
 cost - стоимость (по-умолчанию: 0)
 comment - заметки
 sn - серийный номер
 barcode - штрихкод
 inventory_number - инвентарный номер
 document_number - номер документа прихода
 document_date - дата документа прихода
 additional_data_ip - IP-адрес (для ТМЦ-оборудования)
 additional_data_mac - MAC-адрес (для ТМЦ-оборудования)
 is_check_serial_number - проверять на совпадение серийный номер с уже существующими ТМЦ
```
{% endcode %}

### **add\_inventory\_assortment**

```
Описание: Добавление наименования ТМЦ
Обязательные параметры:
 section_id - id секции каталога товаров
 name - наименование
Необязательные параметры:
 unit_name - единица измерения
 is_require_serial_number - флаг - требовать ввода серийного номера при приходе ТМЦ
 is_require_mac - флаг - требовать ввода MAC-адреса при приходе ТМЦ
```

### **add\_inventory\_section**

```
Описание: Добавление раздела каталога товаров
Обязательные параметры:
 name - наименование
Необязательные параметры:
 typer - id спецпризнака (по-умолчанию: 0)
 parent_id - id родительского раздела каталога
 is_show_on_map - флаг - отображать ли объекты этого раздела слоем на карте
```

### **add\_inventory\_to\_operation**

```
Описание: Добавление ТМЦ в операцию
Обязательные параметры:
 operation_id - id операции
 inventory_id - id ТМЦ (оно должно находится на счёте-источнике операции)
Необязательные параметры:
 amount - количество ТМЦ (если более 1 единицы в ТМЦ)
```

### **change\_arg\_ip**

```
Описание: Изменение IP-адреса в параметрах ТМЦ
Обязательные параметры:
 id - ID ТМЦ
 value - IP-адрес
```

### **change\_arg\_mac**

```
Описание: Изменение MAC-адреса в параметрах ТМЦ
Обязательные параметры:
 id - ID ТМЦ
 value - MAC-адрес
```

### **change\_comment**

```
Описание: Изменение заметки ТМЦ
Обязательные параметры:
 id - ID ТМЦ
 value - заметка
```

### **change\_price**

```
Описание: Изменение стоимости ТМЦ
Обязательные параметры:
 id - ID ТМЦ
 value - стоимость
```

### **change\_serial\_number**

```
Описание: Изменение серийного номера у ТМЦ
Обязательные параметры:
 id - ID ТМЦ
 value - серийный номер
```

### **delete\_inventory**

```
Описание: Удаление СПИСАННОГО ТМЦ
Обязательные параметры:
 id - id ТМЦ (ТМЦ обязательно должно быть списанным)
```

### **edit\_inventory\_assortment**

```
Описание: Редактирование наименования ТМЦ
Обязательные параметры:
 id - id наименования
Необязательные параметры:
 name - наименование
 unit_name - единица измерения
 is_require_serial_number - флаг - требовать ввода серийного номера при приходе ТМЦ
 is_require_mac - флаг - требовать ввода MAC-адреса при приходе ТМЦ
```

### **edit\_inventory\_section**

```
Описание: Редактирование раздела каталога товаров
Обязательные параметры:
 id - id раздела каталога
Необязательные параметры:
 name - наименование
 parent_id - id родительского раздела каталога
 is_show_on_map - флаг - отображать ли объекты этого раздела слоем на карте
```

### **get\_inventory**

```
Описание: Получение информации о ТМЦ
Обязательные параметры:
 id - ID ТМЦ
```

### **get\_inventory\_amount**

```
Описание: Получение списка ТМЦ
Обязательные параметры:
 location - категория учёта [storage|employee|customer|node|task]
Необязательные параметры:
 object_id - id объекта учёта (можно через запятую)
 inventory_type_id - id наименования ТМЦ (можно через запятую)
 section_id - id секции каталога товаров (можно через запятую)
```

### **get\_inventory\_catalog**

```
Описание: Получение списка разделов каталога
Необязательные параметры
 id - ID наименования ТМЦ (можно через запятую)
 section_id - ID типа ТМЦ (можно через запятую)
```

### **get\_inventory\_catalog\_id\_by\_name**

```
Описание: Получение ID наименования ТМЦ по его названию
Обязательные параметры:
 name - наименование
```

### **get\_inventory\_id**

{% code overflow="wrap" %}
```
Описание: Получение ID ТМЦ по входящим данным
Необязательные параметры:
 is_all_data - флаг - возвращать все найденные ТМЦ, а не только одно
Обязательные параметры:
 data_typer - тип данных, которые проверяем (возможные значения: barcode, inventory_number, serial_number, mac, ip)
 data_value - значение
```
{% endcode %}

### **get\_inventory\_section\_catalog**

```
Описание: Получение наименований каталога ТМЦ
```

### **get\_inventory\_storage**

```
Описание: Получение списка складов
```

### **get\_operation**

```
Описание: Получение информации по операциям
Необязательные параметры (но должно быть хоть что-то):
 id - ID операции (можно несколько значений через запятую)
 src_account - счёт-кредита (откуда)
 dst_account - счёт-дебита (куда)
 date_start - дата начала периода
 date_finish - дата окончания периода
 inventory_id - id ТМЦ
 employee_id - id сотрудника - инициатора операции
 inventory_assortment_id - id наименования ТМЦ
```

### **split\_inventory**

```
Описание: Разделение ТМЦ
Обязательные параметры:
 id - id ТМЦ
 amount - требуемое количество
```

{% hint style="info" %}
_В результате разделения в ТМЦ id останется количество равное amount и будет создано новое ТМЦ (вернётся в переменной new\_id) с остаточным количеством._
{% endhint %}

### **transfer\_inventory**

```
Описание: Перемещение ТМЦ
Обязательные параметры:
 inventory_id - ID ТМЦ
 dst_account - Счет-получатель
Необязательные параметры
 comment - заметки
 employee_id - ID сотрудника - автора операции
```
